---
title: 'Webhook Integration Guide'
---

## 1. Webhook Subscription

Partners can subscribe to event notifications from **AccessRC** via the `api/Event/Subscribe` endpoint.

### ğŸ’¡ Example Requests

#### ğŸ”¹ No Authentication
```json
{
  "eventType": "DELIVERY_CHANNEL_STATUS",
  "callbackUrl": "https://partner.example.com/webhook"
}
```
#### ğŸ”¹ API Key Authentication
```json
{
  "eventType": "DELIVERY_CHANNEL_STATUS",
  "callbackUrl": "https://partner.example.com/webhook",
  "auth": {
    "type": "header",
    "headerName": "X-API-Key",
    "headerValue": "my-api-key"
  }
}
```
#### ğŸ”¹ Basic Authentication
```json
{
  "eventType": "DELIVERY_CHANNEL_STATUS",
  "callbackUrl": "https://partner.example.com/webhook",
  "auth": {
    "type": "basic",
    "username": "webhook-user",
    "password": "s3cr3t"
  }
}
```
#### ğŸ”¹ HMAC Authentication
```json
{
  "eventType": "DELIVERY_CHANNEL_STATUS",
  "callbackUrl": "https://partner.example.com/webhook",
  "auth": {
    "type": "hmac",
    "secret": "abcd1234"
  }
}
```

## 2. ğŸ” Webhook Request Authentication

AccessRC will send event callbacks to your registered callbackUrl.

Each webhook request will include an authentication header according to your chosen subscription option:

<div className="overflow-x-auto mt-4 mb-4">

| ğŸ”¸ Auth Type | ğŸ”– Header | ğŸ§© Example |
|--------------|------------|------------|
| **None** | *(no header)* | â€“ |
| **API Key** | `x-api-key` | `x-api-key: my-api-key` |
| **Basic** | `Authorization` | `Authorization: Basic bXl1c2VyOm15cGFzc3dvcmQ=` |
| **HMAC** | `x-signature	` | `x-signature: sha256=abcdef123456...` |

</div>

## 3. ğŸ§® Verifying HMAC Signatures

When using **HMAC authentication**, every webhook request includes an `X-Signature` header:

```http
x-signature: sha256=3bdc5b07d7ef9b61b98ed5df4b1793e12fd...
```

This signature is generated using:

- ğŸ§¾ The **raw HTTP request body** (exact bytes, not parsed JSON)  
- ğŸ”‘ The **shared secret** you provided in your subscription  

---

### âœ… Verification Steps

1. **Extract the Signature**  
   Read the `x-signature` header from the incoming request.

2. **Get the Raw Request Body**  
   Use the exact raw payload as received â€” do not reformat or parse.

3. **Recompute the Signature**  
   Use `HMAC-SHA256(secret, rawBody)` to generate your own hash.  
   Prefix it with `"sha256="`.

4. **Compare Signatures**  
   Compare your computed signature with the received one.

---


## 4. ğŸ”’ Security Best Practices

- ğŸš« **Never log or expose the shared secret.**  
- âœ… **Always verify signatures** for HMAC webhooks.  
- ğŸ” **Reject any unsigned or invalid webhook requests.**  
- ğŸŒ **Always use HTTPS** for your webhook endpoint.  
- ğŸ§± Keep your secret in secure configuration storage (not in code or client apps).  

---

## 5. ğŸ§ª Testing Webhooks

To test locally and ensure your webhook integration works as expected:

1. ğŸŒ Use a tool like **ngrok** or **localtunnel** to expose your local webhook endpoint publicly.  
2. ğŸªµ Log incoming request **headers** and the **raw body** for debugging.  
3. ğŸ”‘ Simulate signature generation manually using your shared secret to validate your implementation.  
4. ğŸ§© Verify your signature verification logic before deploying to production.  
5. ğŸ” Test retry scenarios by sending multiple requests and validating idempotency.  

> ğŸ’¡ **Tip:** When testing, return different HTTP status codes (200, 401, 403) to confirm AccessRC handles each scenario as expected.

---

## 6. ğŸ“¬ Response Expectations

Your webhook endpoint should behave as follows:

- âœ… **Return `HTTP 2xx`** (usually `200 OK`) when processing succeeds.  
- ğŸ” **Return `401 Unauthorized`** if signature or authentication validation fails.  
- â±ï¸ **Respond quickly** (within a few seconds) â€” delayed responses may trigger retries.  
- ğŸ§¾ Include a short, plain-text or JSON response body if helpful for debugging, but itâ€™s optional.  

### ğŸ’¬ Example Responses

#### âœ… Success
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "status": "success",
  "message": "Callback successfully received",
  "data": {}
}
```

#### âŒ Invalid Signature (HMAC)
```http
HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
  "status": "failed",
  "error": {
     "code": 401,
     "message": "Invalid Signature",
     "type": "Unauthorized"
  }
}
```

#### ğŸš« Invalid API KEY
```http
HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
  "status": "failed",
  "error": {
     "code": 401,
     "message": "Invalid API KEY",
     "type": "Unauthorized"
  }
}
```

#### ğŸš« Invalid Credentials
```http
HTTP/1.1 401 Unauthorized
Content-Type: application/json

{
  "status": "failed",
  "error": {
     "code": 401,
     "message": "Invalid Credentials",
     "type": "Unauthorized"
  }
}
```